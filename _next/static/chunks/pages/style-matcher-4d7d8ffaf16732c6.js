(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{7613:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/style-matcher",function(){return n(2091)}])},2091:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return StyleMatchTool}});var s=n(5893),i=n(5022),a=n(3513),l=n(9008),r=n.n(l),o=n(7294),c=n(6548),u=n(2419),d=n(7546),p=n(7268),f=n(5186),h=n(9384),m=n(5881),g=n(3484),y=n(1139);let v={popup:{popupVisible:!1},name:null,displayName:null,loading:!1,matchSlope:m.m3.Upright},x=(0,o.createContext)(g._.Default(v)),S=(0,o.createContext)(g._.Default(f.sN));function StyleMatchTool(){let e=(0,g.M)(f.sN),t=(0,g.M)(v);return(0,s.jsx)(S.Provider,{value:{...e},children:(0,s.jsxs)(x.Provider,{value:{...t},children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"Style Matching Tool"})}),(0,s.jsxs)("div",{className:"page",children:[(0,s.jsx)(p.$,{className:"customizer",children:(0,s.jsx)(SettingsPanel,{})}),(0,s.jsx)(p.$,{className:"customizer",children:(0,s.jsx)("div",{className:"style-matcher-panel style-matcher-cv-panel",children:(0,s.jsx)(EditPanel,{})})}),(0,s.jsx)(p.$,{className:"customizer",children:(0,s.jsx)("div",{className:"result-panel",children:(0,s.jsx)(ResultsPanel,{})})})]}),(0,s.jsx)(u.d,{dropInheritedCvs:!0,pCc:e,pUx:g._.Lens(t,"popup")})]})})}function SettingsPanel(){let e=(0,o.useContext)(S),t=(0,o.useContext)(x),n=g._.Lens(e,"serifStyle"),i=g._.Lens(t,"matchSlope");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"config-panel",children:[(0,s.jsxs)("h2",{children:[(0,s.jsx)("em",{children:"01"})," Style Matcher"]}),(0,s.jsx)("div",{className:"customizer-body",children:(0,s.jsx)("dl",{children:(0,s.jsx)("dd",{children:(0,s.jsx)(ReferenceFontUploader,{})})})})]}),(0,s.jsx)("div",{className:"config-co-panel",children:(0,s.jsxs)("div",{className:"customizer-body",children:[(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{children:"Match Serifs"}),(0,s.jsx)("dd",{children:(0,s.jsx)(d.K,{options:m.xE,value:n.val,onChange:n.set})})]}),(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{children:"Match Slope"}),(0,s.jsx)("dd",{children:(0,s.jsx)(d.K,{options:m.dm,value:i.val,onChange:i.set})})]}),(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{}),(0,s.jsx)("dd",{children:(0,s.jsx)(u.Y,{...g._.Lens(t,"popup")})})]})]})})]})}function ReferenceFontUploader(){let e=(0,o.useContext)(x),onFileUpload=async t=>{var n,s;let i=null==t?void 0:null===(s=t.target)||void 0===s?void 0:null===(n=s.files)||void 0===n?void 0:n[0];if(!i)return;e.set((0,a.Uy)(e=>{e.name=null,e.loading=!0}));let l=(null==i?void 0:i.name)||"",r="TARGET-FONT-"+(l.replace(/\.[^/.]+$/,"")||"").replace(/\s/g,"-");await loadFont(r,i),e.set((0,a.Uy)(e=>{e.displayName=l,e.name=r,e.loading=!1}))},t=e.val.loading?"Loading...":"\uD83D\uDCC1 "+(e.val.displayName||"Load reference font..."),n=e.val.loading?null:(0,s.jsx)("input",{type:"file",accept:".ttf,.otf,.woff,woff2",onChange:onFileUpload});return(0,s.jsxs)("label",{className:"file-upload",title:"Load reference font...",children:[t,n]})}async function loadFont(e,t){let n=document.fonts.check('10px "'.concat(e,'"'));if(!n){let n=new FontFace(e,await t.arrayBuffer());try{await n.load(),document.fonts.add(n)}catch(t){console.error("Font ".concat(e," failed to load"))}}}let j=Array.from(h.D.values());function EditPanel(){let e=(0,o.useContext)(S),t=(0,o.useContext)(x),n=e.val,i=t.val.matchSlope,l=(0,f.O)(t.val.matchSlope),r={style:(0,f.gV)(n),slope:i},u=y.yL(n.charVariants,{isSlab:n.serifStyle===m.Hn.Slab,slope:i});return j.map(t=>(0,s.jsxs)("div",{className:"cv-item",children:[(0,s.jsx)(TargetFontSample,{text:t.descSampleText[0]}),(0,s.jsx)(c.nM,{className:"large",prime:t,fontStyle:r,onItemSelect:n=>e.set((0,a.Uy)(e=>{e.charVariants[l]||(e.charVariants[l]={}),e.charVariants[l][t.key]=n})),onItemClear:()=>e.set((0,a.Uy)(e=>{let n=e.charVariants[l]||{};delete n[t.key],e.charVariants[l]=n})),activeVariantKey:u.resolvedComposition[t.key],activeVariantKind:n.charVariants[l]&&t.key in n.charVariants[l]?c.Ft.NonDefault:c.Ft.Default})]},t.key))}function TargetFontSample(e){let t=(0,o.useContext)(x);return t.val.loading||!t.val.name?null:(0,s.jsx)("div",{className:"target-sample",style:{fontFamily:t.val.name,fontStyle:m.dm.get(t.val.matchSlope).css},children:e.text})}function ResultsPanel(){let{val:e}=(0,o.useContext)(S);return(0,s.jsx)("pre",{children:i.stringify({variants:(0,f.vn)(e,!0)})})}},2419:function(e,t,n){"use strict";n.d(t,{Y:function(){return ImportConfigurationPopupEnableButton},d:function(){return ImportConfigurationPopup}});var s=n(5893),i=n(7294),a=n(5186);function ImportConfigurationPopup(e){let[t,n]=(0,i.useState)("");return e.pUx.val.popupVisible?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"customizer popup-background",onClick:()=>e.pUx.set({...e.pUx.val,popupVisible:!1})}),(0,s.jsxs)("div",{className:"customizer popup",children:[(0,s.jsx)("h2",{children:"Import Configuration"}),(0,s.jsx)("div",{className:"inner",children:(0,s.jsx)("textarea",{value:t,onChange:e=>n(e.target.value)})}),(0,s.jsx)("input",{type:"button",value:"Import",onClick:()=>{let s=(0,a.S3)(t,a.sN);e.dropInheritedCvs&&(s=(0,a.mo)(s)),e.pCc.set(s),n(""),e.pUx.set({...e.pUx.val,popupVisible:!1})}})]})]}):null}function ImportConfigurationPopupEnableButton(e){return(0,s.jsx)("input",{type:"button",value:"Import Configuration",onClick:()=>e.set({popupVisible:!0})})}},7546:function(e,t,n){"use strict";n.d(t,{K:function(){return EnumSelect}});var s=n(5893);function EnumSelect(e){return(0,s.jsx)("select",{value:e.value,onChange:t=>e.onChange?e.onChange(Number(t.target.value)):void 0,children:Array.from(e.options).map(e=>{let[t,n]=e;return(0,s.jsx)("option",{value:t,children:n.display},t)})})}},5186:function(e,t,n){"use strict";n.d(t,{Lr:function(){return formatBuildPlan},O:function(){return slopeToCustomizerStyleKey},S3:function(){return parseCustomization},gV:function(){return resolveDisplayStyle},mo:function(){return dropInheritedCvs},sN:function(){return o},vn:function(){return getResolvedBuildPlanCharVariants}});var s=n(5022),i=n(9384),a=n(5881),l=n(5429),r=n(1139);let o={family:"Iosevka Custom",serifStyle:a.Hn.Sans,spacing:a.Ki.Normal,defaultWidthAtExpanded:!1,charVariants:{},weightGradesIncluded:new Set(a.Id.keys()),widthGradesIncluded:new Set(a.PE.keys()),slopeGradesIncluded:new Set(a.dm.keys()),ligationSet:l.cy[1],fDisplayHighlight:!0,fExportCvSs:!1,fExportGlyphNames:!1};function parseCustomization(e,t){let n=s.parse(e);if(!isJsonMap(n.buildPlans))return t;for(let[e,s]of Object.entries(n.buildPlans))isJsonMap(s)&&("string"==typeof s.family&&(t={...t,family:s.family}),"string"==typeof s.spacing&&(t={...t,spacing:function(e){return a._H.find(a.Ki.Normal,(t,n)=>n.internal===e)}(s.spacing)}),"string"==typeof s.serifs&&(t={...t,serifStyle:function(e){return a.xE.find(a.Hn.Sans,(t,n)=>n.internal===e)}(s.serifs)}),"boolean"==typeof s["no-cv-ss"]&&(t={...t,fExportCvSs:!s["no-cv-ss"]}),"boolean"==typeof s["export-glyph-names"]&&(t={...t,fExportGlyphNames:s["export-glyph-names"]}),isJsonMap(s.ligations)&&(t=function(e,t){if("string"==typeof e.inherits){for(let n of l.cy)if(n.selector&&n.selector===e.inherits){t={...t,ligationSet:n};break}}return t}(s.ligations,t)),isJsonMap(s.variants)&&(t=function(e,t){let n={};if("string"==typeof e.inherits)for(let[t,s]of i.Xf)s.key===e.inherits&&(n={...n,inherits:s});for(let t of r.AT){let s=e[t];if(!isJsonMap(s))continue;let i={};for(let[e,t]of Object.entries(s))"string"==typeof t&&(i[e]=t);n={...n,[t]:i}}return t={...t,charVariants:n}}(s.variants,t)),isJsonMap(s.weights)&&(t=function(e,t){let n=new Set;for(let[t,s]of Object.entries(e))if(isJsonMap(s)&&"number"==typeof s.shape)for(let[e,t]of a.Id)e===s.shape&&n.add(e);return t={...t,weightGradesIncluded:n}}(s.weights,t)),isJsonMap(s.widths)&&(t=function(e,t){let n=new Set,s=!1;for(let[t,i]of Object.entries(e))if(isJsonMap(i)&&"number"==typeof i.shape&&"string"==typeof i.css)for(let[e,t]of a.FL)e===i.shape&&(n.add(e),i.css!==t.css&&(s=!0));return s?n.add(a.Lu.Expanded):n.add(a.Lu.Normal),{...t,defaultWidthAtExpanded:s,widthGradesIncluded:n}}(s.widths,t)),isJsonMap(s.slopes)&&(t=function(e,t){let n=new Set;for(let[t,s]of Object.entries(e))if(isJsonMap(s)&&"string"==typeof s.shape)for(let[e,t]of a.dm)t.internal===s.shape&&n.add(e);return t={...t,slopeGradesIncluded:n}}(s.slopes,t)));return t}function isJsonMap(e){return!!e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)}function formatBuildPlan(e){let t={family:e.family,spacing:a._H.get(e.spacing).internal,serifs:a.xE.get(e.serifStyle).internal,"no-cv-ss":!e.fExportCvSs,"export-glyph-names":e.fExportGlyphNames};return e.ligationSet.selector||(t["no-ligation"]=!0),function(e,t){let n={};for(let t of(e.charVariants.inherits&&(n.inherits=e.charVariants.inherits.key),r.AT)){let s=e.charVariants[t];if(!s||!Object.keys(s).length)continue;let a={};for(let[e,t]of i.D)s[e]&&(a[e]=s[e]);n[t]=a}Object.keys(n).length&&(t.variants=n)}(e,t),e.ligationSet.selector&&e.ligationSet!==l.cy[1]&&(t.ligations={inherits:e.ligationSet.selector}),function(e,t){let n=!0,s={};for(let[t,i]of a.Id)e.weightGradesIncluded.has(t)?s[i.internal]={shape:t,menu:t,css:t}:n=!1;n||(t.weights=s)}(e,t),function(e,t){let n=!e.defaultWidthAtExpanded,s={};for(let[t,i]of a.FL)if(e.widthGradesIncluded.has(t)!==a.PE.has(t)&&(n=!1),e.widthGradesIncluded.has(t)){let n=t*(e.defaultWidthAtExpanded?500/600:1),i=a.Lu.Normal,l=a.Db.get(i);for(let[e,t]of a.Db)Math.abs(e-n)<Math.abs(i-n)&&(i=e,l=t);s[l.internal]={shape:t,menu:l.menu,css:l.css}}n||(t.widths=s)}(e,t),function(e,t){let n=!0,s={};for(let[t,i]of a.dm)e.slopeGradesIncluded.has(t)?s[i.internal]={angle:i.angle,shape:i.internal,menu:i.internal,css:i.css}:n=!1;n||(t.slopes=s)}(e,t),t}function resolveDisplayStyle(e){switch(e.serifStyle){case a.Hn.Sans:if(e.spacing===a.Ki.QuasiProportional)return a.bg.QP;if(e.spacing===a.Ki.QuasiProportionalExtOnly)return a.bg.QPE;return a.bg.Sans;case a.Hn.Slab:if(e.spacing===a.Ki.QuasiProportional)return a.bg.QPSlab;if(e.spacing===a.Ki.QuasiProportionalExtOnly)return a.bg.QPESlab;return a.bg.Slab}}function slopeToCustomizerStyleKey(e){switch(e){case a.m3.Upright:return"design";case a.m3.Italic:return"italic";case a.m3.Oblique:return"oblique";default:return"design"}}function getResolvedBuildPlanCharVariants(e,t){let n=r.yL(e.charVariants,{isSlab:e.serifStyle===a.Hn.Slab,slope:a.m3.Upright}),s=r.yL(e.charVariants,{isSlab:e.serifStyle===a.Hn.Slab,slope:a.m3.Italic}),i=r.yL(e.charVariants,{isSlab:e.serifStyle===a.Hn.Slab,slope:a.m3.Oblique});if(!t)return{design:n.resolvedNonDefaultComposition,italic:s.resolvedNonDefaultComposition,oblique:i.resolvedNonDefaultComposition};{let e=r.eu(s.resolvedComposition,n.resolvedComposition),t=r.eu(i.resolvedComposition,n.resolvedComposition),a={design:r.oU(n.resolvedNonDefaultComposition),...e?{italic:e}:{},...t?{oblique:t}:{}};return a}}function dropInheritedCvs(e){return{...e,charVariants:getResolvedBuildPlanCharVariants(e,!1)}}},3484:function(e,t,n){"use strict";n.d(t,{M:function(){return useStatePtr},_:function(){return i}});var s=n(7294);let i={Default:e=>({val:e,set:()=>{}}),Lens:(e,t)=>({val:e.val[t],set:n=>{n instanceof Function?e.set(e=>({...e,[t]:n(e[t])})):e.set(e=>({...e,[t]:n}))}})};function useStatePtr(e){let[t,n]=(0,s.useState)(e);return{val:t,set:n}}}},function(e){e.O(0,[774,637,426,888,179],function(){return e(e.s=7613)}),_N_E=e.O()}]);