(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{7613:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/style-matcher",function(){return n(4247)}])},4247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return StyleMatchTool}});var a=n(5893),s=n(5022),i=n(3513),r=n(9008),l=n.n(r),o=n(7294),c=n(8005),u=n(7714),d=n(4516),p=n(8213),f=n(9072),h=n(9774),m=n(720),g=n(7744),v=n(6787);let y={popup:{popupVisible:!1},name:null,displayName:null,loading:!1,matchSlope:m.m3.Upright},x=(0,o.createContext)(g._.Default(y)),S=(0,o.createContext)(g._.Default(f.sN));function StyleMatchTool(){let e=(0,g.M)(f.sN),t=(0,g.M)(y);return(0,a.jsx)(S.Provider,{value:{...e},children:(0,a.jsxs)(x.Provider,{value:{...t},children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Style Matching Tool"})}),(0,a.jsxs)("div",{className:"page",children:[(0,a.jsx)(p.$,{className:"customizer",children:(0,a.jsx)(SettingsPanel,{})}),(0,a.jsx)(p.$,{className:"customizer",children:(0,a.jsx)("div",{className:"style-matcher-panel style-matcher-cv-panel",children:(0,a.jsx)(EditPanel,{})})}),(0,a.jsx)(p.$,{className:"customizer",children:(0,a.jsx)("div",{className:"result-panel",children:(0,a.jsx)(ResultsPanel,{})})})]}),(0,a.jsx)(u.d,{dropInheritedCvs:!0,pCc:e,pUx:g._.Lens(t,"popup")})]})})}function SettingsPanel(){let e=(0,o.useContext)(S),t=(0,o.useContext)(x),n=g._.Lens(e,"serifStyle"),s=g._.Lens(t,"matchSlope");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"config-panel",children:[(0,a.jsxs)("h2",{children:[(0,a.jsx)("em",{children:"01"})," Style Matcher"]}),(0,a.jsx)("div",{className:"customizer-body",children:(0,a.jsx)("dl",{children:(0,a.jsx)("dd",{children:(0,a.jsx)(ReferenceFontUploader,{})})})})]}),(0,a.jsx)("div",{className:"config-co-panel",children:(0,a.jsxs)("div",{className:"customizer-body",children:[(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{children:"Match Serifs"}),(0,a.jsx)("dd",{children:(0,a.jsx)(d.K,{options:m.xE,value:n.val,onChange:n.set})})]}),(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{children:"Match Slope"}),(0,a.jsx)("dd",{children:(0,a.jsx)(d.K,{options:m.dm,value:s.val,onChange:s.set})})]}),(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{}),(0,a.jsx)("dd",{children:(0,a.jsx)(u.Y,{...g._.Lens(t,"popup")})})]})]})})]})}function ReferenceFontUploader(){let e=(0,o.useContext)(x),onFileUpload=async t=>{var n,a;let s=null==t?void 0:null===(a=t.target)||void 0===a?void 0:null===(n=a.files)||void 0===n?void 0:n[0];if(!s)return;e.set((0,i.Uy)(e=>{e.name=null,e.loading=!0}));let r=(null==s?void 0:s.name)||"",l="TARGET-FONT-"+(r.replace(/\.[^/.]+$/,"")||"").replace(/\s/g,"-");await loadFont(l,s),e.set((0,i.Uy)(e=>{e.displayName=r,e.name=l,e.loading=!1}))},t=e.val.loading?"Loading...":"\uD83D\uDCC1 "+(e.val.displayName||"Load reference font..."),n=e.val.loading?null:(0,a.jsx)("input",{type:"file",accept:".ttf,.otf,.woff,woff2",onChange:onFileUpload});return(0,a.jsxs)("label",{className:"file-upload",title:"Load reference font...",children:[t,n]})}async function loadFont(e,t){let n=document.fonts.check('10px "'.concat(e,'"'));if(!n){let n=new FontFace(e,await t.arrayBuffer());try{await n.load(),document.fonts.add(n)}catch(t){console.error("Font ".concat(e," failed to load"))}}}let C=Array.from(h.D.values());function EditPanel(){let e=(0,o.useContext)(S),t=(0,o.useContext)(x),n=e.val,s=t.val.matchSlope,i=(0,f.O)(t.val.matchSlope),r={style:(0,f.gV)(n),slope:s},l=v.yL(n.charVariants,{isSlab:n.serifStyle===m.Hn.Slab,slope:s});return C.map(t=>(0,a.jsxs)("div",{className:"cv-item",children:[(0,a.jsx)(TargetFontSample,{text:t.descSampleText[0]}),(0,a.jsx)(c.nM,{className:"large",prime:t,fontStyle:r,onItemSelect:CvSink(t,i,e),onItemClear:CvClearSink(t,i,e),activeVariantKey:l.resolvedComposition[t.key],activeVariantKind:n.charVariants[i]&&t.key in n.charVariants[i]?c.Ft.NonDefault:c.Ft.Default})]},t.key))}function TargetFontSample(e){let t=(0,o.useContext)(x);return t.val.loading||!t.val.name?null:(0,a.jsx)("div",{className:"target-sample",style:{fontFamily:t.val.name,fontStyle:m.dm.get(t.val.matchSlope).css},children:e.text})}function CvSink(e,t,n){return a=>n.set((0,i.Uy)(n=>{n.charVariants[t]||(n.charVariants[t]={}),n.charVariants[t][e.key]=a}))}function CvClearSink(e,t,n){return()=>n.set((0,i.Uy)(n=>{let a=n.charVariants[t]||{};delete a[e.key],n.charVariants[t]=a}))}function ResultsPanel(){let{val:e}=(0,o.useContext)(S);return(0,a.jsx)("pre",{children:s.stringify({variants:(0,f.vn)(e,!0)})})}},7714:function(e,t,n){"use strict";n.d(t,{Y:function(){return ImportConfigurationPopupEnableButton},d:function(){return ImportConfigurationPopup}});var a=n(5893),s=n(7294),i=n(9072);function ImportConfigurationPopup(e){let[t,n]=(0,s.useState)("");return e.pUx.val.popupVisible?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"customizer popup-background",onClick:()=>e.pUx.set({...e.pUx.val,popupVisible:!1})}),(0,a.jsxs)("div",{className:"customizer popup",children:[(0,a.jsx)("h2",{children:"Import Configuration"}),(0,a.jsx)("div",{className:"inner",children:(0,a.jsx)("textarea",{value:t,onChange:e=>n(e.target.value)})}),(0,a.jsx)("input",{type:"button",value:"Import",onClick:()=>{let a=(0,i.S3)(t,i.sN);e.dropInheritedCvs&&(a=(0,i.mo)(a)),e.pCc.set(a),n(""),e.pUx.set({...e.pUx.val,popupVisible:!1})}})]})]}):null}function ImportConfigurationPopupEnableButton(e){return(0,a.jsx)("input",{type:"button",value:"Import Configuration",onClick:()=>e.set({popupVisible:!0})})}},4516:function(e,t,n){"use strict";n.d(t,{K:function(){return EnumSelect}});var a=n(5893);function EnumSelect(e){return(0,a.jsx)("select",{value:e.value,onChange:t=>e.onChange?e.onChange(Number(t.target.value)):void 0,children:Array.from(e.options).map(e=>{let[t,n]=e;return(0,a.jsx)("option",{value:t,children:n.display},t)})})}},9072:function(e,t,n){"use strict";n.d(t,{Lr:function(){return formatBuildPlan},O:function(){return slopeToCustomizerStyleKey},S3:function(){return parseCustomization},gV:function(){return resolveDisplayStyle},mo:function(){return dropInheritedCvs},sN:function(){return o},vn:function(){return getResolvedBuildPlanCharVariants}});var a=n(5022),s=n(9774),i=n(720),r=n(1972),l=n(6787);let o={family:"Iosevka Custom",serifStyle:i.Hn.Sans,spacing:i.Ki.Normal,defaultWidthAtExpanded:!1,charVariants:{},weightGradesIncluded:new Set(i.Id.keys()),widthGradesIncluded:new Set(i.PE.keys()),slopeGradesIncluded:new Set(i.dm.keys()),ligationSet:r.cy[1],fDisplayHighlight:!0,fExportCvSs:!1,fExportGlyphNames:!1};function parseCustomization(e,t){let n=a.parse(e);if(!isJsonMap(n.buildPlans))return t;for(let[e,a]of Object.entries(n.buildPlans))isJsonMap(a)&&("string"==typeof a.family&&(t={...t,family:a.family}),"string"==typeof a.spacing&&(t={...t,spacing:parseSpacingGrade(a.spacing)}),"string"==typeof a.serifs&&(t={...t,serifStyle:parseSerifsGrade(a.serifs)}),"boolean"==typeof a["no-cv-ss"]&&(t={...t,fExportCvSs:!a["no-cv-ss"]}),"boolean"==typeof a["export-glyph-names"]&&(t={...t,fExportGlyphNames:a["export-glyph-names"]}),isJsonMap(a.ligations)&&(t=parseLigations(a.ligations,t)),isJsonMap(a.variants)&&(t=parseCharVariants(a.variants,t)),isJsonMap(a.weights)&&(t=parseWeights(a.weights,t)),isJsonMap(a.widths)&&(t=parseWidths(a.widths,t)),isJsonMap(a.slopes)&&(t=parseSlopes(a.slopes,t)));return t}function isJsonMap(e){return!!e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)}function parseSpacingGrade(e){return i._H.find(i.Ki.Normal,(t,n)=>n.internal===e)}function parseSerifsGrade(e){return i.xE.find(i.Hn.Sans,(t,n)=>n.internal===e)}function parseWeights(e,t){let n=new Set;for(let[t,a]of Object.entries(e))if(isJsonMap(a)&&"number"==typeof a.shape)for(let[e,t]of i.Id)e===a.shape&&n.add(e);return t={...t,weightGradesIncluded:n}}function parseWidths(e,t){let n=new Set,a=!1;for(let[t,s]of Object.entries(e))if(isJsonMap(s)&&"number"==typeof s.shape&&"string"==typeof s.css)for(let[e,t]of i.FL)e===s.shape&&(n.add(e),s.css!==t.css&&(a=!0));return a?n.add(i.Lu.Expanded):n.add(i.Lu.Normal),{...t,defaultWidthAtExpanded:a,widthGradesIncluded:n}}function parseSlopes(e,t){let n=new Set;for(let[t,a]of Object.entries(e))if(isJsonMap(a)&&"string"==typeof a.shape)for(let[e,t]of i.dm)t.internal===a.shape&&n.add(e);return t={...t,slopeGradesIncluded:n}}function parseLigations(e,t){if("string"==typeof e.inherits){for(let n of r.cy)if(n.selector&&n.selector===e.inherits){t={...t,ligationSet:n};break}}return t}function parseCharVariants(e,t){let n={};if("string"==typeof e.inherits)for(let[t,a]of s.Xf)a.key===e.inherits&&(n={...n,inherits:a});for(let t of l.AT){let a=e[t];if(!isJsonMap(a))continue;let s={};for(let[e,t]of Object.entries(a))"string"==typeof t&&(s[e]=t);n={...n,[t]:s}}return t={...t,charVariants:n}}function formatBuildPlan(e){let t={family:e.family,spacing:i._H.get(e.spacing).internal,serifs:i.xE.get(e.serifStyle).internal,"no-cv-ss":!e.fExportCvSs,"export-glyph-names":e.fExportGlyphNames};return e.ligationSet.selector||(t["no-ligation"]=!0),formatVariants(e,t),formatLigations(e,t),formatWeights(e,t),formatWidths(e,t),formatSlopes(e,t),t}function formatVariants(e,t){let n={};for(let t of(e.charVariants.inherits&&(n.inherits=e.charVariants.inherits.key),l.AT)){let a=e.charVariants[t];if(!a||!Object.keys(a).length)continue;let i={};for(let[e,t]of s.D)a[e]&&(i[e]=a[e]);n[t]=i}Object.keys(n).length&&(t.variants=n)}function formatLigations(e,t){e.ligationSet.selector&&e.ligationSet!==r.cy[1]&&(t.ligations={inherits:e.ligationSet.selector})}function formatWeights(e,t){let n=!0,a={};for(let[t,s]of i.Id)e.weightGradesIncluded.has(t)?a[s.internal]={shape:t,menu:t,css:t}:n=!1;n||(t.weights=a)}function formatWidths(e,t){let n=!e.defaultWidthAtExpanded,a={};for(let[t,s]of i.FL)if(e.widthGradesIncluded.has(t)!==i.PE.has(t)&&(n=!1),e.widthGradesIncluded.has(t)){let n=t*(e.defaultWidthAtExpanded?500/600:1),s=i.Lu.Normal,r=i.Db.get(s);for(let[e,t]of i.Db)Math.abs(e-n)<Math.abs(s-n)&&(s=e,r=t);a[r.internal]={shape:t,menu:r.menu,css:r.css}}n||(t.widths=a)}function formatSlopes(e,t){let n=!0,a={};for(let[t,s]of i.dm)e.slopeGradesIncluded.has(t)?a[s.internal]={angle:s.angle,shape:s.internal,menu:s.internal,css:s.css}:n=!1;n||(t.slopes=a)}function resolveDisplayStyle(e){switch(e.serifStyle){case i.Hn.Sans:if(e.spacing===i.Ki.QuasiProportional)return i.bg.QP;if(e.spacing===i.Ki.QuasiProportionalExtOnly)return i.bg.QPE;return i.bg.Sans;case i.Hn.Slab:if(e.spacing===i.Ki.QuasiProportional)return i.bg.QPSlab;if(e.spacing===i.Ki.QuasiProportionalExtOnly)return i.bg.QPESlab;return i.bg.Slab}}function slopeToCustomizerStyleKey(e){switch(e){case i.m3.Upright:return"design";case i.m3.Italic:return"italic";case i.m3.Oblique:return"oblique";default:return"design"}}function getResolvedBuildPlanCharVariants(e,t){let n=l.yL(e.charVariants,{isSlab:e.serifStyle===i.Hn.Slab,slope:i.m3.Upright}),a=l.yL(e.charVariants,{isSlab:e.serifStyle===i.Hn.Slab,slope:i.m3.Italic}),s=l.yL(e.charVariants,{isSlab:e.serifStyle===i.Hn.Slab,slope:i.m3.Oblique});if(!t)return{design:n.resolvedNonDefaultComposition,italic:a.resolvedNonDefaultComposition,oblique:s.resolvedNonDefaultComposition};{let e=l.eu(a.resolvedComposition,n.resolvedComposition),t=l.eu(s.resolvedComposition,n.resolvedComposition),i={design:l.oU(n.resolvedNonDefaultComposition),...e?{italic:e}:{},...t?{oblique:t}:{}};return i}}function dropInheritedCvs(e){return{...e,charVariants:getResolvedBuildPlanCharVariants(e,!1)}}},7744:function(e,t,n){"use strict";n.d(t,{M:function(){return useStatePtr},_:function(){return s}});var a=n(7294);let s={Default:e=>({val:e,set:()=>{}}),Lens:(e,t)=>({val:e.val[t],set:n=>{n instanceof Function?e.set(e=>({...e,[t]:n(e[t])})):e.set(e=>({...e,[t]:n}))}})};function useStatePtr(e){let[t,n]=(0,a.useState)(e);return{val:t,set:n}}}},function(e){e.O(0,[774,637,113,888,179],function(){return e(e.s=7613)}),_N_E=e.O()}]);