(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{7613:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/style-matcher",function(){return n(2091)}])},2091:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return StyleMatchTool}});var a=n(5893),s=n(5022),i=n(3513),l=n(9008),r=n.n(l),o=n(7294),c=n(6548),u=n(5980),d=n(2419),f=n(7268),p=n(5186),h=n(9384),m=n(5881),g=n(3484),y=n(1139);let x={popup:{popupVisible:!1},name:null,displayName:null,loading:!1,matchItalics:!1},v=(0,o.createContext)(g._.Default(x)),j=(0,o.createContext)(g._.Default(p.sN));function StyleMatchTool(){let e=(0,g.M)(p.sN),t=(0,g.M)(x);return(0,a.jsx)(j.Provider,{value:{...e},children:(0,a.jsxs)(v.Provider,{value:{...t},children:[(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:"Style Matching Tool"})}),(0,a.jsxs)("div",{className:"page",children:[(0,a.jsx)(f.$,{className:"customizer",children:(0,a.jsx)(SettingsPanel,{})}),(0,a.jsx)(f.$,{className:"customizer",children:(0,a.jsx)("div",{className:"style-matcher-panel style-matcher-cv-panel",children:(0,a.jsx)(EditPanel,{})})}),(0,a.jsx)(f.$,{className:"customizer",children:(0,a.jsx)("div",{className:"result-panel",children:(0,a.jsx)(ResultsPanel,{})})})]}),(0,a.jsx)(d.d,{pCC:e,pUx:g._.Lens(t,"popup")})]})})}function SettingsPanel(){let e=(0,o.useContext)(v);return(0,a.jsxs)("div",{className:"config-panel",children:[(0,a.jsxs)("h2",{children:[(0,a.jsx)("em",{children:"01"})," Style Matcher"]}),(0,a.jsxs)("div",{className:"customizer-body",children:[(0,a.jsx)("dl",{children:(0,a.jsx)("dd",{children:(0,a.jsx)(ReferenceFontUploader,{})})}),(0,a.jsx)("dl",{children:(0,a.jsx)("dd",{children:(0,a.jsx)(u.r,{label:"Match Italics",value:e.value.matchItalics,onChange:t=>{e.set((0,i.Uy)(e=>{e.matchItalics=t}))}})})}),(0,a.jsx)("dl",{children:(0,a.jsx)("dd",{children:(0,a.jsx)("input",{type:"button",value:"Import Configuration",onClick:()=>e.set((0,i.Uy)(e=>{e.popup.popupVisible=!0}))})})})]})]})}function ReferenceFontUploader(){let e=(0,o.useContext)(v),onFileUpload=async t=>{var n,a;let s=null==t?void 0:null===(a=t.target)||void 0===a?void 0:null===(n=a.files)||void 0===n?void 0:n[0];if(!s)return;e.set((0,i.Uy)(e=>{e.name=null,e.loading=!0}));let l=(null==s?void 0:s.name)||"",r="TARGET-FONT-"+(l.replace(/\.[^/.]+$/,"")||"").replace(/\s/g,"-");await loadFont(r,s),e.set((0,i.Uy)(e=>{e.displayName=l,e.name=r,e.loading=!1}))},t=e.value.loading?"Loading...":"\uD83D\uDCC1 "+(e.value.displayName||"Load reference font..."),n=e.value.loading?null:(0,a.jsx)("input",{type:"file",accept:".ttf,.otf,.woff,woff2",onChange:onFileUpload});return(0,a.jsxs)("label",{className:"file-upload",title:"Load reference font...",children:[t,n]})}async function loadFont(e,t){let n=document.fonts.check('10px "'.concat(e,'"'));if(!n){let n=new FontFace(e,await t.arrayBuffer());try{await n.load(),document.fonts.add(n)}catch(t){console.error("Font ".concat(e," failed to load"))}}}let b=Array.from(h.D.values());function EditPanel(){let e=(0,o.useContext)(v),t=(0,o.useContext)(j),n=t.value,s=e.value.matchItalics?m.m3.Italic:m.m3.Upright,l=e.value.matchItalics?"italic":"design",r={style:(0,p.gV)(n),slope:s},u=y.yL(n.charVariants,{isSlab:n.serifStyle===m.Hn.Slab,slope:s});return b.map(e=>(0,a.jsxs)("div",{className:"cv-item",children:[(0,a.jsx)(TargetFontSample,{text:e.descSampleText[0]}),(0,a.jsx)(c.nM,{className:"large",prime:e,fontStyle:r,onItemSelect:n=>t.set((0,i.Uy)(t=>{t.charVariants[l]||(t.charVariants[l]={}),t.charVariants[l][e.key]=n})),onItemClear:()=>t.set((0,i.Uy)(t=>{let n=t.charVariants[l]||{};delete n[e.key],t.charVariants[l]=n})),activeVariantKey:u.resolvedComposition[e.key],activeVariantKind:n.charVariants[l]&&e.key in n.charVariants[l]?c.Ft.NonDefault:c.Ft.Default})]},e.key))}function TargetFontSample(e){let t=(0,o.useContext)(v);return t.value.loading||!t.value.name?null:(0,a.jsx)("div",{className:"target-sample",style:{fontFamily:t.value.name,fontStyle:t.value.matchItalics?"italic":"normal"},children:e.text})}function ResultsPanel(){let{value:e}=(0,o.useContext)(j),t=(0,p.Lr)(e);if("object"==typeof t.variants)return(0,a.jsx)("pre",{children:s.stringify(t.variants)})}},5980:function(e,t,n){"use strict";n.d(t,{r:function(){return CheckGroup}});var a=n(5893),s=n(216);function CheckGroup(e){return(0,a.jsxs)("label",{className:(0,s.D)("check-group","extender",e.disabled?"disabled":""),children:[(0,a.jsx)("input",{type:"checkbox",disabled:e.disabled,checked:e.value,onChange:t=>e.onChange(t.target.checked)}),(0,a.jsx)("span",{className:"check-mark"}),e.label]})}},2419:function(e,t,n){"use strict";n.d(t,{d:function(){return ImportConfigurationPopup}});var a=n(5893),s=n(7294),i=n(5186);function ImportConfigurationPopup(e){let[t,n]=(0,s.useState)("");return e.pUx.value.popupVisible?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"customizer popup-background",onClick:()=>e.pUx.set({...e.pUx.value,popupVisible:!1})}),(0,a.jsxs)("div",{className:"customizer popup",children:[(0,a.jsx)("h2",{children:"Import Configuration"}),(0,a.jsx)("div",{className:"inner",children:(0,a.jsx)("textarea",{value:t,onChange:e=>n(e.target.value)})}),(0,a.jsx)("input",{type:"button",value:"Import",onClick:()=>{let a=(0,i.S3)(t,i.sN);e.pCC.set(a),n(""),e.pUx.set({...e.pUx.value,popupVisible:!1})}})]})]}):null}},5186:function(e,t,n){"use strict";n.d(t,{Lr:function(){return formatBuildPlan},S3:function(){return parseCustomization},gV:function(){return resolveDisplayStyle},sN:function(){return o}});var a=n(5022),s=n(9384),i=n(5881),l=n(5429),r=n(1139);let o={family:"Iosevka Custom",serifStyle:i.Hn.Sans,spacing:i.Ki.Normal,defaultWidthAtExpanded:!1,charVariants:{},weightGradesIncluded:new Set(i.Id.keys()),widthGradesIncluded:new Set(i.PE.keys()),slopeGradesIncluded:new Set(i.dm.keys()),ligationSet:l.cy[1],fDisplayHighlight:!0,fExportCvSs:!1,fExportGlyphNames:!1};function parseCustomization(e,t){let n=a.parse(e);if(!isJsonMap(n.buildPlans))return t;for(let[e,a]of Object.entries(n.buildPlans))isJsonMap(a)&&("string"==typeof a.family&&(t={...t,family:a.family}),"string"==typeof a.spacing&&(t={...t,spacing:function(e){return i._H.find(i.Ki.Normal,(t,n)=>n.internal===e)}(a.spacing)}),"string"==typeof a.serifs&&(t={...t,serifStyle:function(e){return i.xE.find(i.Hn.Sans,(t,n)=>n.internal===e)}(a.serifs)}),"boolean"==typeof a["no-cv-ss"]&&(t={...t,fExportCvSs:!a["no-cv-ss"]}),"boolean"==typeof a["export-glyph-names"]&&(t={...t,fExportGlyphNames:a["export-glyph-names"]}),isJsonMap(a.ligations)&&(t=function(e,t){if("string"==typeof e.inherits){for(let n of l.cy)if(n.selector&&n.selector===e.inherits){t={...t,ligationSet:n};break}}return t}(a.ligations,t)),isJsonMap(a.variants)&&(t=function(e,t){let n={};if("string"==typeof e.inherits)for(let[t,a]of s.Xf)a.key===e.inherits&&(n={...n,inherits:a});for(let t of r.AT){let a=e[t];if(!isJsonMap(a))continue;let s={};for(let[e,t]of Object.entries(a))"string"==typeof t&&(s[e]=t);n={...n,[t]:s}}return t={...t,charVariants:n}}(a.variants,t)),isJsonMap(a.weights)&&(t=function(e,t){let n=new Set;for(let[t,a]of Object.entries(e))if(isJsonMap(a)&&"number"==typeof a.shape)for(let[e,t]of i.Id)e===a.shape&&n.add(e);return t={...t,weightGradesIncluded:n}}(a.weights,t)),isJsonMap(a.widths)&&(t=function(e,t){let n=new Set,a=!1;for(let[t,s]of Object.entries(e))if(isJsonMap(s)&&"number"==typeof s.shape&&"string"==typeof s.css)for(let[e,t]of i.FL)e===s.shape&&(n.add(e),s.css!==t.css&&(a=!0));return a?n.add(i.Lu.Expanded):n.add(i.Lu.Normal),{...t,defaultWidthAtExpanded:a,widthGradesIncluded:n}}(a.widths,t)),isJsonMap(a.slopes)&&(t=function(e,t){let n=new Set;for(let[t,a]of Object.entries(e))if(isJsonMap(a)&&"string"==typeof a.shape)for(let[e,t]of i.dm)t.internal===a.shape&&n.add(e);return t={...t,slopeGradesIncluded:n}}(a.slopes,t)));return t}function isJsonMap(e){return!!e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)}function formatBuildPlan(e){let t={family:e.family,spacing:i._H.get(e.spacing).internal,serifs:i.xE.get(e.serifStyle).internal,"no-cv-ss":!e.fExportCvSs,"export-glyph-names":e.fExportGlyphNames};return e.ligationSet.selector||(t["no-ligation"]=!0),function(e,t){let n={};for(let t of(e.charVariants.inherits&&(n.inherits=e.charVariants.inherits.key),r.AT)){let a=e.charVariants[t];if(!a||!Object.keys(a).length)continue;let i={};for(let[e,t]of s.D)a[e]&&(i[e]=a[e]);n[t]=i}Object.keys(n).length&&(t.variants=n)}(e,t),e.ligationSet.selector&&e.ligationSet!==l.cy[1]&&(t.ligations={inherits:e.ligationSet.selector}),function(e,t){let n=!0,a={};for(let[t,s]of i.Id)e.weightGradesIncluded.has(t)?a[s.internal]={shape:t,menu:t,css:t}:n=!1;n||(t.weights=a)}(e,t),function(e,t){let n=!e.defaultWidthAtExpanded,a={};for(let[t,s]of i.FL)if(e.widthGradesIncluded.has(t)!==i.PE.has(t)&&(n=!1),e.widthGradesIncluded.has(t)){let n=t*(e.defaultWidthAtExpanded?500/600:1),s=i.Lu.Normal,l=i.Db.get(s);for(let[e,t]of i.Db)Math.abs(e-n)<Math.abs(s-n)&&(s=e,l=t);a[l.internal]={shape:t,menu:l.menu,css:l.css}}n||(t.widths=a)}(e,t),function(e,t){let n=!0,a={};for(let[t,s]of i.dm)e.slopeGradesIncluded.has(t)?a[s.internal]={angle:s.angle,shape:s.internal,menu:s.internal,css:s.css}:n=!1;n||(t.slopes=a)}(e,t),t}function resolveDisplayStyle(e){switch(e.serifStyle){case i.Hn.Sans:if(e.spacing===i.Ki.QuasiProportional)return i.bg.QP;if(e.spacing===i.Ki.QuasiProportionalExtOnly)return i.bg.QPE;return i.bg.Sans;case i.Hn.Slab:if(e.spacing===i.Ki.QuasiProportional)return i.bg.QPSlab;if(e.spacing===i.Ki.QuasiProportionalExtOnly)return i.bg.QPESlab;return i.bg.Slab}}},3484:function(e,t,n){"use strict";n.d(t,{M:function(){return useStatePtr},_:function(){return s}});var a=n(7294);let s={Default:e=>({value:e,set:()=>{}}),Lens:(e,t)=>({value:e.value[t],set:n=>{n instanceof Function?e.set(e=>({...e,[t]:n(e[t])})):e.set(e=>({...e,[t]:n}))}})};function useStatePtr(e){let[t,n]=(0,a.useState)(e);return{value:t,set:n}}}},function(e){e.O(0,[774,637,426,888,179],function(){return e(e.s=7613)}),_N_E=e.O()}]);